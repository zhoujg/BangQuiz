# ğŸ”§ æ•…éšœæ’é™¤æŒ‡å—

## å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

---

## 1. CORS é”™è¯¯

### é—®é¢˜æè¿°
```
Access to XMLHttpRequest has been blocked by CORS policy
```

### è§£å†³æ–¹æ¡ˆ
âœ… **å·²ä¿®å¤** - åç«¯å·²é…ç½®æ”¯æŒä»¥ä¸‹ç«¯å£ï¼š
- http://localhost:9528
- http://localhost:8100
- http://localhost:4200

### éªŒè¯æ–¹æ³•
```bash
curl -X OPTIONS http://localhost:9527/api/exam-packages \
  -H "Origin: http://localhost:8100" \
  -H "Access-Control-Request-Method: GET" \
  -v 2>&1 | grep "Access-Control-Allow-Origin"
```

åº”è¯¥çœ‹åˆ°ï¼š`Access-Control-Allow-Origin: http://localhost:8100`

---

## 2. ç«¯å£è¢«å ç”¨

### é—®é¢˜æè¿°
```
Failed to listen on 127.0.0.1:9527 (reason: Address already in use)
```

### è§£å†³æ–¹æ¡ˆ
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :9527

# æ€æ­»è¿›ç¨‹
kill -9 <PID>

# æˆ–è€…ä¸€é”®æ¸…ç†
lsof -ti :9527 | xargs kill -9
```

---

## 3. å‰ç«¯æ— æ³•è®¿é—®

### é—®é¢˜æè¿°
æµè§ˆå™¨æ— æ³•æ‰“å¼€ http://localhost:9528

### è§£å†³æ–¹æ¡ˆ
```bash
# æ£€æŸ¥å‰ç«¯æ˜¯å¦è¿è¡Œ
lsof -i :9528

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨å‰ç«¯
cd frontend
ng serve --port 9528
```

---

## 4. åç«¯ API 500 é”™è¯¯

### é—®é¢˜æè¿°
API è¿”å› 500 Internal Server Error

### è§£å†³æ–¹æ¡ˆ
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f backend/storage/logs/laravel.log

# æ¸…é™¤ç¼“å­˜
cd backend
php artisan cache:clear
php artisan config:clear
php artisan route:clear
```

---

## 5. æ•°æ®åº“è¿æ¥å¤±è´¥

### é—®é¢˜æè¿°
```
SQLSTATE[HY000] [2002] Connection refused
```

### è§£å†³æ–¹æ¡ˆ
1. ç¡®è®¤ MySQL æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥ `backend/.env` é…ç½®ï¼š
```env
DB_HOST=127.0.0.1
DB_PORT=8889
DB_DATABASE=bang_quiz
DB_USERNAME=root
DB_PASSWORD=root
```

---

## 6. é¢˜ç›®æ•°æ®ä¸ºç©º

### é—®é¢˜æè¿°
API è¿”å›ç©ºæ•°ç»„ `[]`

### è§£å†³æ–¹æ¡ˆ
```bash
# é‡æ–°ç”Ÿæˆæµ‹è¯•æ•°æ®
cd backend
php artisan migrate:fresh --seed --seeder=TOGAFCompleteSeeder
```

---

## 7. manifest.json 404

### é—®é¢˜æè¿°
```
GET http://localhost:9528/manifest.json 404
```

### è§£å†³æ–¹æ¡ˆ
âœ… **å·²ä¿®å¤** - manifest.json å·²åˆ›å»ºå¹¶é…ç½®

**éªŒè¯**:
```bash
curl -I http://localhost:8100/manifest.json
# åº”è¯¥è¿”å›: HTTP/1.1 200 OK
```

å¦‚æœä»ç„¶å‡ºç° 404ï¼Œæ£€æŸ¥ `frontend/angular.json` æ˜¯å¦åŒ…å«ï¼š
```json
"assets": [
  "src/manifest.json"
]
```

ç„¶åé‡å¯å‰ç«¯æœåŠ¡å™¨ï¼š
```bash
# åœæ­¢å‰ç«¯
Ctrl+C

# é‡æ–°å¯åŠ¨
ng serve --port 9528
# æˆ–
ionic serve
```

---

## 8. favicon.png 404

### é—®é¢˜æè¿°
```
GET http://localhost:9528/assets/icon/favicon.png 404
```

### è§£å†³æ–¹æ¡ˆ
âœ… **å·²ä¿®å¤** - favicon.png å·²ä» togaf-frontend å¤åˆ¶

**éªŒè¯**:
```bash
curl -I http://localhost:8100/assets/icon/favicon.png
# åº”è¯¥è¿”å›: HTTP/1.1 200 OK
```

å¦‚æœæ–‡ä»¶ä¸¢å¤±ï¼Œå¯ä»¥é‡æ–°å¤åˆ¶ï¼š
```bash
cp togaf-frontend/src/assets/icon/favicon.png frontend/src/assets/icon/favicon.png
```

æˆ–è€…å‡†å¤‡è‡ªå·±çš„å›¾æ ‡ï¼š
1. å‡†å¤‡ä¸€ä¸ª 512x512 çš„ PNG å›¾æ ‡
2. æ”¾åˆ° `frontend/src/assets/icon/favicon.png`
3. é‡å¯å‰ç«¯æœåŠ¡å™¨

---

## 9. å‰ç«¯ç¼–è¯‘é”™è¯¯

### é—®é¢˜æè¿°
```
ERROR in src/app/...
```

### è§£å†³æ–¹æ¡ˆ
```bash
# æ¸…é™¤ node_modules é‡æ–°å®‰è£…
cd frontend
rm -rf node_modules package-lock.json
npm install

# é‡æ–°å¯åŠ¨
ng serve --port 9528
```

---

## 10. æœåŠ¡å™¨æ— å“åº”

### é—®é¢˜æè¿°
æœåŠ¡å™¨å¯åŠ¨åæ— å“åº”

### è§£å†³æ–¹æ¡ˆ
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
lsof -i :9527  # åç«¯
lsof -i :9528  # å‰ç«¯
lsof -i :8889  # æ•°æ®åº“

# é‡å¯æ‰€æœ‰æœåŠ¡
./STOP_SERVERS.sh
./START_SERVERS.sh
```

---

## 11. æµè§ˆå™¨æ§åˆ¶å°è­¦å‘Š

### é—®é¢˜æè¿°
æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºä»¥ä¸‹è­¦å‘Šï¼š

1. **Passive Event Listener è­¦å‘Š**
```
[Violation] Added non-passive event listener to a scroll-blocking 'touchstart' event
```

2. **Favicon å›¾æ ‡å°ºå¯¸è­¦å‘Š**
```
Error while trying to use the following icon from the Manifest
(Resource size is not correct - typo in the Manifest?)
```

3. **ARIA Hidden è­¦å‘Š**
```
Blocked aria-hidden on an element because its descendant retained focus
```

### è§£å†³æ–¹æ¡ˆ
âœ… **è¿™äº›éƒ½æ˜¯éå…³é”®æ€§è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½**

#### 1. Passive Event Listener
- **åŸå› **: Ionic æ¡†æ¶çš„è§¦æ‘¸äº‹ä»¶å¤„ç†
- **å½±å“**: ä»…æ€§èƒ½æç¤ºï¼Œä¸å½±å“åŠŸèƒ½
- **è§£å†³**: æ— éœ€å¤„ç†ï¼ŒIonic å›¢é˜Ÿä¼šåœ¨æœªæ¥ç‰ˆæœ¬ä¼˜åŒ–

#### 2. Favicon å°ºå¯¸è­¦å‘Š
- **åŸå› **: å½“å‰ favicon.png å°ºå¯¸å¯èƒ½ä¸æ˜¯æ ‡å‡†çš„ 512x512
- **å½±å“**: ä»…è­¦å‘Šï¼Œå›¾æ ‡ä»å¯æ­£å¸¸æ˜¾ç¤º
- **è§£å†³**: å¯é€‰ - æ›¿æ¢ä¸ºæ ‡å‡† 512x512 çš„ PNG å›¾æ ‡
```bash
# æ£€æŸ¥å½“å‰å›¾æ ‡å°ºå¯¸
file frontend/src/assets/icon/favicon.png
```

#### 3. ARIA Hidden è­¦å‘Š
- **åŸå› **: Ionic è·¯ç”±åˆ‡æ¢æ—¶çš„ç„¦ç‚¹ç®¡ç†
- **å½±å“**: ä»…å¯è®¿é—®æ€§è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½
- **è§£å†³**: æ— éœ€å¤„ç†ï¼Œè¿™æ˜¯ Ionic æ¡†æ¶çš„å·²çŸ¥è¡Œä¸º

### å¦‚ä½•éšè—è¿™äº›è­¦å‘Š
å¦‚æœæƒ³è¦æ›´æ¸…çˆ½çš„æ§åˆ¶å°ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼š
1. æ‰“å¼€ Console è®¾ç½®ï¼ˆé½¿è½®å›¾æ ‡ï¼‰
2. å–æ¶ˆå‹¾é€‰ "Violations"
3. åªä¿ç•™ "Errors" å’Œ "Warnings"

---

## ğŸ” è¯Šæ–­å‘½ä»¤

### æ£€æŸ¥åç«¯çŠ¶æ€
```bash
curl http://localhost:9527/api/exam-packages
```
åº”è¯¥è¿”å› JSON æ•°æ®

### æ£€æŸ¥å‰ç«¯çŠ¶æ€
```bash
curl http://localhost:9528
```
åº”è¯¥è¿”å› HTML

### æ£€æŸ¥æ•°æ®åº“
```bash
cd backend
php artisan tinker
>>> \App\Models\Question::count()
```
åº”è¯¥è¿”å› 15

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹æ—¥å¿—
```bash
# åç«¯æ—¥å¿—
tail -f backend/storage/logs/laravel.log

# å‰ç«¯æ—¥å¿—
# åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹
```

### é‡ç½®é¡¹ç›®
```bash
# å®Œå…¨é‡ç½®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
cd backend
php artisan migrate:fresh --seed --seeder=TOGAFCompleteSeeder

cd ../frontend
rm -rf node_modules
npm install
```

---

## âœ… å¥åº·æ£€æŸ¥æ¸…å•

è¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®è®¤ä¸€åˆ‡æ­£å¸¸ï¼š

```bash
# 1. æ£€æŸ¥åç«¯
curl http://localhost:9527/api/exam-packages

# 2. æ£€æŸ¥ CORS
curl -X OPTIONS http://localhost:9527/api/exam-packages \
  -H "Origin: http://localhost:8100" \
  -H "Access-Control-Request-Method: GET" \
  -v 2>&1 | grep "Access-Control"

# 3. æ£€æŸ¥é¢˜ç›®
curl "http://localhost:9527/api/questions/next?package_id=1"

# 4. æ£€æŸ¥æ•°æ®åº“
cd backend && php artisan tinker
>>> \App\Models\Question::count()
>>> exit

# 5. æ£€æŸ¥å‰ç«¯
curl -I http://localhost:9528
```

æ‰€æœ‰å‘½ä»¤éƒ½åº”è¯¥æˆåŠŸè¿”å›æ•°æ®ã€‚

---

**æœ€åæ›´æ–°**: 2026-01-30
