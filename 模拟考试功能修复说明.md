# 模拟考试功能修复说明

## 问题描述
点击首页的"模拟考试"按钮没有任何反应。

## 问题原因
1. 路由配置中缺少 `package-list` 和 `exam-list` 路由
2. `goToMockExam()` 方法试图导航到不存在的 `/mock-exam` 路由
3. `package-list` 页面的导航路径与路由配置不匹配

## 解决方案

### 1. 添加缺失的路由
在 `app-routing.module.ts` 中添加：
```typescript
{
  path: 'package-list',
  loadChildren: () => import('./pages/package-list/package-list.module').then(m => m.PackageListPageModule)
},
{
  path: 'exam-list/:id',
  loadChildren: () => import('./pages/exam-list/exam-list.module').then(m => m.ExamListPageModule)
}
```

### 2. 更新首页模拟考试功能
修改 `home.page.ts` 的 `goToMockExam()` 方法：
```typescript
async goToMockExam() {
  // 弹出选择对话框，让用户选择考试级别
  const alert = await this.alertController.create({
    header: '选择模拟考试级别',
    message: '请选择你要参加的模拟考试',
    buttons: [
      {
        text: 'Level 1 Foundation',
        handler: () => {
          this.router.navigate(['/package-list']);
        }
      },
      {
        text: 'Level 2 Practitioner',
        handler: () => {
          this.router.navigate(['/package-list']);
        }
      },
      {
        text: '取消',
        role: 'cancel'
      }
    ]
  });

  await alert.present();
}
```

### 3. 修复 package-list 导航
修改 `package-list.page.ts`：
```typescript
// 之前
selectPackage(packageId: number) {
  this.router.navigate(['/exams', packageId]);
}

// 现在
selectPackage(packageId: number) {
  this.router.navigate(['/exam-list', packageId]);
}
```

## 功能流程

### 用户操作流程
1. **首页** → 点击"模拟考试"按钮
2. **选择对话框** → 选择 Level 1 或 Level 2
3. **测验包列表** → 显示可用的测验包
4. **考试列表** → 选择具体的考试（练习测验或模拟考试）
5. **题目页面** → 开始答题

### 页面导航路径
```
/home
  ↓ (点击模拟考试)
[选择对话框]
  ↓ (选择级别)
/package-list
  ↓ (选择测验包)
/exam-list/:id
  ↓ (选择考试)
/question?examId=X
```

## 后端 API 支持

### 1. 获取测验包列表
```
GET /api/exam-packages
```
返回：
```json
[
  {
    "id": 1,
    "name": "TOGAF Level 1 Foundation",
    "code": "togaf-level1",
    "description": "TOGAF 10 基础级认证",
    "exams_count": 2
  },
  {
    "id": 2,
    "name": "TOGAF Level 2 Practitioner",
    "code": "togaf-level2",
    "description": "TOGAF 10 实践级认证",
    "exams_count": 1
  }
]
```

### 2. 获取测验包下的考试列表
```
GET /api/exam-packages/{id}/exams
```
返回：
```json
[
  {
    "id": 1,
    "title": "Unit 1: Concepts - 练习测验",
    "exam_type": "practice",
    "question_count": 15,
    "time_limit": 25,
    "pass_score": 60
  },
  {
    "id": 2,
    "title": "TOGAF Level 1 模拟考试",
    "exam_type": "mock",
    "question_count": 40,
    "time_limit": 60,
    "pass_score": 55
  }
]
```

## 测试方法

### 1. 测试模拟考试按钮
1. 访问 http://localhost:8100
2. 点击"快速入口"中的"模拟考试"按钮
3. 应该弹出选择对话框
4. 选择 Level 1 或 Level 2
5. 应该导航到测验包列表页面

### 2. 测试测验包列表
1. 在测验包列表页面
2. 应该看到两个测验包：
   - TOGAF Level 1 Foundation (2个测验)
   - TOGAF Level 2 Practitioner (1个测验)
3. 点击任意测验包
4. 应该导航到该测验包的考试列表

### 3. 测试考试列表
1. 在考试列表页面
2. 应该看到该测验包下的所有考试
3. 点击任意考试
4. 应该导航到题目页面开始答题

## 相关文件
- `frontend/src/app/app-routing.module.ts` - 路由配置
- `frontend/src/app/pages/home/home.page.ts` - 首页逻辑
- `frontend/src/app/pages/package-list/package-list.page.ts` - 测验包列表
- `frontend/src/app/pages/package-list/package-list.page.html` - 测验包列表UI
- `frontend/src/app/pages/exam-list/exam-list.page.ts` - 考试列表
- `frontend/src/app/pages/exam-list/exam-list.page.html` - 考试列表UI
- `backend/routes/api.php` - API路由
- `backend/app/Http/Controllers/Api/ExamController.php` - 考试控制器

## 注意事项
1. 目前选择对话框中的两个选项都导航到同一个页面（package-list），因为测验包列表会显示所有可用的测验包
2. 用户可以在测验包列表中自由选择 Level 1 或 Level 2
3. 每个测验包下可能有多个考试（练习测验、模拟考试等）
4. 模拟考试通常题目数量更多，时间更长，更接近真实考试

## 未来改进建议
1. 可以在选择对话框中直接导航到对应级别的模拟考试，跳过测验包列表
2. 可以添加考试历史记录，显示用户之前的考试成绩
3. 可以添加考试倒计时功能
4. 可以添加考试结果详细分析页面
